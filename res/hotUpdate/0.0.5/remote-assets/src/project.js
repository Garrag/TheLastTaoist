require=function t(e,i,s){function n(o,r){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return n(i||t)},p,p.exports,t,e,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({BaseScript:[function(t,e,i){"use strict";cc._RF.push(e,"392adYIU69G1Jv7+qGzBgSw","BaseScript"),cc.Class({extends:cc.Component,properties:{},getMaskLayer:function(t){cc.loader.loadRes("prefab/Common/MaskLayer",function(e,i){if(t){var s=cc.instantiate(i);s.getComponent(cc.Widget).left=0,s.getComponent(cc.Widget).right=0,s.getComponent(cc.Widget).bottom=0,s.getComponent(cc.Widget).top=0;var n=s.getComponent(cc.Button),a=new cc.Component.EventHandler;a.target=this.node,a.component="BaseScript",a.handler="removeTop",a.customEventData="",n.clickEvents.push(a),t(s)}}.bind(this))},addPopupByName:function(t,e){cc.loader.loadRes(t,function(t,i){this.addPopup(i,e)}.bind(this))},addPopup:function(t,e){var i=(e=e||{}).mask||!1,t=cc.instantiate(t);e.node=t,GM.popupList.push(e),i?this.getMaskLayer(function(i){i.parent=cc.find("Canvas"),t.parent=cc.find("Canvas"),e.maskNode=i}):t.parent=cc.find("Canvas")},removeTop:function(){var t=GM.popupList.pop();t.node&&t.node.destroy(),t.maskNode&&t.maskNode.destroy()},removePopup:function(t){if(t)for(var e=0;e<GM.popupList.length;e++)if(GM.popupList[e].node==t){t.destroy();var i=GM.popupList[e].maskNode;i&&i.destroy(),GM.popupList.splice(e,1);break}},removeSelf:function(){this.removePopup(this.node)}}),cc._RF.pop()},{}],CameraManager:[function(t,e,i){"use strict";cc._RF.push(e,"b639aop9klG3pzN3xsen90F","CameraManager"),cc.Class({extends:cc.Component,properties:{targetNode:cc.Node},onLoad:function(){},update:function(t){this.node.position=this.targetNode.convertToWorldSpaceAR(cc.p(0,0))}}),cc._RF.pop()},{}],EnemyManager:[function(t,e,i){"use strict";cc._RF.push(e,"968c24moNVKDJLZQGoSUDha","EnemyManager"),cc.Class({extends:cc.Component,properties:{roleLayer:cc.Node,rolePrefab_1:cc.Prefab},onLoad:function(){},initFun:function(){this.initEnemy()},initEnemy:function(){var t=GM.mapManager.getMapRolePos();if(t.pos1){(e=cc.instantiate(this.rolePrefab_1)).parent=this.roleLayer;i=this.roleLayer.convertToNodeSpaceAR(t.pos1);e.setPosition(i)}if(t.pos2){var e=cc.instantiate(this.rolePrefab_1);e.parent=this.roleLayer;var i=this.roleLayer.convertToNodeSpaceAR(t.pos2);e.setPosition(i)}}}),cc._RF.pop()},{}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"0eb4464hsxM9rD5772ppchg","GameManager");var s=t("MapManager"),n=t("EnemyManager");cc.Class({extends:cc.Component,properties:{enemyManager:n,mapManager:s},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,GM.mapManager=this.mapManager,GM.enemyManager=this.enemyManager,GM.gameManager=this,this.mapManager.initFun(),this.enemyManager.initFun(),this.initPlayer()},initPlayer:function(){},resetGame:function(){},pauseGame:function(){},openSetting:function(){}}),cc._RF.pop()},{EnemyManager:"EnemyManager",MapManager:"MapManager"}],HotUpdate:[function(t,e,i){"use strict";cc._RF.push(e,"47ab53yke1OBag+6XVnUoTN","HotUpdate");var s=t("BaseScript");cc.Class({extends:s,properties:{manifestUrl:cc.RawAsset,versionLabel:cc.Label,byteLabel:cc.Label,byteProgress:cc.ProgressBar,fileLabel:cc.Label,fileProgress:cc.ProgressBar,info:cc.Label,_updating:!1,_canRetry:!1,_canUpdate:!1,_needRestart:!1,_storagePath:"",_versionCode:""},checkCb:function(t){cc.log("checkCb Code: "+t.getEventCode());var e=!0;switch(t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.info.string="没有找到本地热更新配置.",e=!1;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:this.info.string="下载热更新配置失败.";break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.info.string="解析热更新配置失败.",e=!1;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.info.string="已经是最新版本了";break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.info.string="有新版本发现,请更新游戏",this.fileProgress.progress=0,this.byteProgress.progress=0,this._canUpdate=!0,e=!1;break;default:return}0==e&&(this.cleanCheckListener(),this._updating=!1,this._canUpdate=!0,this._canRetry=!1,this.updatePanel())},updateCb:function(t){var e=!1,i=!1;switch(cc.log("updateCb Code: "+t.getEventCode()),t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.info.string="没有找到本地更新配置",i=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:this.byteProgress.progress=t.getPercent(),this.fileProgress.progress=t.getPercentByFile(),this.fileLabel.string="文件:("+t.getDownloadedFiles()+"/"+t.getTotalFiles()+")",this.byteLabel.string="字节:("+t.getDownloadedBytes()+"/"+t.getTotalBytes()+")";var s=t.getMessage();s&&(this.info.string="更新文件: "+s);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.info.string="配置文件出错",i=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.info.string="已经是最后一个版本了",i=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.info.string="更新结束. "+t.getMessage(),e=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.info.string="更新失败. "+t.getMessage(),this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:this.info.string="资源更新错误: "+t.getAssetId()+", "+t.getMessage();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.info.string=t.getMessage()}i&&(this.cleanUpdateListener(),this._updating=!1,this.updatePanel()),this._needRestart=e,this._needRestart&&this.updatePanel()},restartGame:function(){this.cleanUpdateListener();var t=jsb.fileUtils.getSearchPaths(),e=this._am.getLocalManifest().getSearchPaths();cc.log("hotUpdate path:",e),Array.prototype.unshift(t,e),cc.log("searchPaths path:",t),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),jsb.fileUtils.setSearchPaths(t),cc.audioEngine.stopAll(),cc.game.restart()},loadCustomManifest:function(){if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=null;if(0==jsb.fileUtils.isFileExist(this._storagePath+"project.manifest")){var e=this.manifestUrl,i=JSON.parse(jsb.fileUtils.getStringFromFile(this.manifestUrl));this._versionCode=i.version,t=new jsb.Manifest(e,this._storagePath),this.info.string="使用本地的资源"}else{var s=JSON.parse(jsb.fileUtils.getStringFromFile(this._storagePath+"project.manifest")),i=JSON.parse(jsb.fileUtils.getStringFromFile(this.manifestUrl)),n=this.versionCompareHandle(i.version,s.version);n>0?(this._versionCode=i.version,t=new jsb.Manifest(e,this._storagePath),this.info.string="使用远程版本"):n<=0&&(this._versionCode=s.version,t=new jsb.Manifest(s,this._storagePath),this.info.string="使用本地版本")}null!=t&&this._am.loadLocalManifest(t,this._storagePath),this.versionLabel&&(this.versionLabel.string="V"+this._versionCode)}},retry:function(){!this._updating&&this._canRetry&&(this._canRetry=!1,this.info.string="Retry failed Assets...",this._am.downloadFailedAssets())},cleanCheckListener:function(){null!=this._checkListener&&(cc.eventManager.removeListener(this._checkListener),this._checkListener=null)},checkUpdate:function(){this._updating?this.info.string="检查是否有更新":(this._am.getState()===jsb.AssetsManager.State.UNINITED&&this._am.loadLocalManifest(this.manifestUrl),this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this.cleanCheckListener(),this._checkListener=new jsb.EventListenerAssetsManager(this._am,this.checkCb.bind(this)),cc.eventManager.addListener(this._checkListener,1),this._updating=!0,this._am.checkUpdate()):this.info.string="Failed to load local manifest ...")},cleanUpdateListener:function(){this._updateListener&&(cc.eventManager.removeListener(this._updateListener),this._updateListener=null)},hotUpdate:function(){this._am&&!this._updating&&this._canUpdate&&(this._canUpdate=!1,this._updateListener=new jsb.EventListenerAssetsManager(this._am,this.updateCb.bind(this)),cc.eventManager.addListener(this._updateListener,1),this._am.getState()===jsb.AssetsManager.State.UNINITED&&this._am.loadLocalManifest(this.manifestUrl),this._failCount=0,this._am.update(),this._updating=!0)},show:function(){cc.log("this.node.active:",this.node.active),!1===this.node.active&&(this.node.active=!0)},hide:function(){cc.log("this.node.active:",this.node.active),!0===this.node.active&&(this.node.active=!1)},updatePanel:function(){this.versionLabel&&(this.versionLabel.string="V"+(this._versionCode||" null")),this._needRestart&&this.restartGame()},versionCompareHandle:function(t,e){cc.log("JS Custom Version Compare: version A is "+t+", version B is "+e);for(var i=t.split("."),s=e.split("."),n=0;n<i.length;++n){var a=parseInt(i[n]),o=parseInt(s[n]||0);if(a!==o)return a-o}return s.length>i.length?-1:0},onLoad:function(){cc.sys.isNative&&null!=this.manifestUrl&&(this._checkListener=null,this._updateListener=null,this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"remote-asset/",cc.log("this._storagePath",this._storagePath),this.init(),this._am.setVerifyCallback(function(t,e){var i=e.compressed,s=e.md5,n=e.path;e.size;return i?(this.info.string="Verification passed : "+n,!0):(this.info.string="Verification passed : "+n+" ("+s+")",!0)}.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2))},init:function(){cc.log("init AssetsManager for remote asset : "+this._storagePath),this.fileProgress.progress=0,this.byteProgress.progress=0,this.byteLabel.string="",this.fileLabel.string="",this.info.string="",this._canRetry=!1,this._needRestart=!1,this._canUpdate=!0,this._updating=!1,this._am&&!cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS&&(this._am.release(),this._am=null),this._am=new jsb.AssetsManager("",this._storagePath,this.versionCompareHandle),cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS||this._am.retain(),this.loadCustomManifest(),this.updatePanel()},onDestroy:function(){this._updateListener&&(cc.eventManager.removeListener(this._updateListener),this._updateListener=null),this._am&&!cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS&&this._am.release()}}),cc._RF.pop()},{BaseScript:"BaseScript"}],MainMenu:[function(t,e,i){"use strict";cc._RF.push(e,"0b6297CZahBfYVM+tzQf/9q","MainMenu");var s=t("BaseScript");cc.Class({extends:s,properties:{},onLoad:function(){},start:function(){},joinGame:function(t){cc.director.loadScene("Test")},openSetting:function(t){},openHotUpdateNode:function(){this.addPopupByName("prefab/Common/UpdateNode",{mask:!0})}}),cc._RF.pop()},{BaseScript:"BaseScript"}],MapManager:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","MapManager");var s=t("NavNode"),n=t("NavEdge"),a=t("Platform");cc.Class({extends:cc.Component,properties:{currentMap:cc.TiledMap},initFun:function(){this.navNodeList=new Array,this.navEdgeList=new Array,this.physicsBoxList=new Array,this.platformList=new Array,this.mapInfo=this.getCurrentMapInfo();var t=new cc.Node("MapDebugNode");this.g=t.addComponent(cc.Graphics),t.parent=cc.director.getScene(),this.hideObjLayer(),this.initPhysicsCollider(),this.createNavMap(),this.createPlatforms()},hideObjLayer:function(){for(var t=this.currentMap.getObjectGroups(),e=0;e<t.length;++e)for(var i=t[e].getObjects(),s=0;s<i.length;s++)i[s].sgNode.visible=!1},initPhysicsCollider:function(){this.PhysicsStaticNode=new cc.Node("PhysicsStatic"),this.PhysicsStaticNode.parent=cc.director.getScene();var t=this.currentMap.getObjectGroup("static");if(t)for(var e=t.getObjects(),i=0;i<e.length;i++){var s=e[i].getProperties();if(s)if(s.points){n=this.exchangePos(cc.p(s.x,s.y));this.createPhyPolygon({offset:n,points:s.points})}else{var n=this.exchangePos(cc.p(s.x,s.y)),a=cc.size(s.width,s.height);this.createPhyBox({offset:n,size:a})}}},exchangePos:function(t){var e=this.currentMap.node.getContentSize(),i=cc.p(t.x,e.height-t.y),s=this.getCurrentMapInfo().offset;return i.y+=s.y,i.x+=s.x,i},createPhyBox:function(t){var e=(t=t||{}).offset,i=t.size;e.x+=i.width/2,e.y-=i.height/2;var s=this.PhysicsStaticNode.addComponent(cc.PhysicsBoxCollider);this.physicsBoxList.push(s),s.offset=e,s.size=i,s.apply(),s.body.gravityScale=0,s.body.fixedRotation=!0},createPhyPolygon:function(t){var e=(t=t||{}).offset,i=t.points,s=this.PhysicsStaticNode.addComponent(cc.PhysicsPolygonCollider);this.physicsBoxList.push(s),s.offset=e;for(var n=[],a=0;a<i.length;a++){var o=i[a];n.push(cc.p(o.x,-o.y))}s.points=n,s.apply(),s.body.gravityScale=0,s.body.fixedRotation=!0},createNavMap:function(){this.getMapTilePosList().forEach(function(t){if(!this.isColliderContains(t)){var e=new s;e.init({pos:t,size:cc.size(32,32)}),this.navNodeList.push(e)}},this),this.physicsBoxList.forEach(function(t){t.body.type=cc.RigidBodyType.Static,t.body.linearDamping=1},this),this.navNodeList.forEach(function(t){var e=this.getNearbyNavNode(t);for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];if(s){var a=new n;a.init({headNode:t,lastNode:s}),t.setEdge(i,a),this.navEdgeList.push(a)}}},this)},createPlatforms:function(){var t=new Array;this.navNodeList.forEach(function(e){e.isHaveMidBottpm()&&t.push(e)},this);do{var e=t.shift(),i=new a;!function e(i,s){s.addNode(i),i.foreachEdge(function(i,n){for(var a=0;a<t.length;a++){var o=t[a];n&&n.lastNode==o&&(t.removeByValue(o),e(o,s))}})}(e,i),this.platformList.push(i)}while(t.length>0)},getNearbyNavNode:function(t){var e=t.size.width,i=t.size.height;return{left_top:this.getNavNodeByPos(cc.p(t.pos.x+-1*e,t.pos.y+1*i)),left_mid:this.getNavNodeByPos(cc.p(t.pos.x+-1*e,t.pos.y+0*i)),left_bottom:this.getNavNodeByPos(cc.p(t.pos.x+-1*e,t.pos.y+-1*i)),mid_top:this.getNavNodeByPos(cc.p(t.pos.x+-0*e,t.pos.y+1*i)),mid_bottom:this.getNavNodeByPos(cc.p(t.pos.x+-0*e,t.pos.y+-1*i)),right_top:this.getNavNodeByPos(cc.p(t.pos.x+1*e,t.pos.y+1*i)),right_mid:this.getNavNodeByPos(cc.p(t.pos.x+1*e,t.pos.y+0*i)),right_bottom:this.getNavNodeByPos(cc.p(t.pos.x+1*e,t.pos.y+-1*i))}},getNavNodeByPos:function(t){for(var e=0;e<this.navNodeList.length;e++){var i=this.navNodeList[e];if(t.sub(i.pos).magSqr()<=Math.pow(i.size.width/2,2))return i}return null},getPlatformByNode:function(t){for(var e=0;e<this.platformList.length;e++){var i=this.platformList[e];if(i.contains(t))return i}},isMapContains:function(t){var e=this.getCurrentMapInfo().rect,i=cc.size(0,0);return!(t.x<e.x-i.width)&&(!(t.x>e.x+e.width+i.width)&&(!(t.y<e.y-i.height)&&!(t.y>e.y+e.height+i.height)))},isColliderContains:function(t){return null!=cc.director.getPhysicsManager().testPoint(t)},getMapTilePosList:function(){var t=new Array,e=this.getCurrentMapInfo(),i=e.mapNumSize,s=(e.tileSize,e.tileSize.width),n=e.tileSize.height,a=(e.mapSize,Math.floor(i.width/2)-.5),o=.5-Math.floor(i.height/2),r=cc.p(s*a,-n*o);r=r.add(e.offset),t.push(r);for(var c=1,h=i.width>i.height?i.width:i.height,p=function(t,e){return t.x==e.x&&t.y==e.y};c<h/2+2;){for(var d=0;d<4;d++)switch(d){case 0:for(g=-c;g<=c;g++){u=r.add(cc.p(-c*s,g*n));!t.contains(u,p)&&this.isMapContains(u)&&t.push(u)}break;case 1:for(var g=-c;g<=c;g++){u=r.add(cc.p(c*s,g*n));!t.contains(u,p)&&this.isMapContains(u)&&t.push(u)}break;case 2:for(l=-c;l<=c;l++){u=r.add(cc.p(l*s,c*n));!t.contains(u,p)&&this.isMapContains(u)&&t.push(u)}break;case 3:for(var l=-c;l<=c;l++){var u=r.add(cc.p(-l*s,-c*n));!t.contains(u,p)&&this.isMapContains(u)&&t.push(u)}}c++}return t},getCurrentMapInfo:function(){var t={},e=this.currentMap.getMapSize(),i=this.currentMap.getTileSize(),s=i.width,n=i.height,a=cc.size(e.width*s,e.height*n);t.mapNumSize=e,t.tileSize=i,t.mapSize=a,t.currentMap=this.currentMap,t.firstLayer=this.currentMap.allLayers()[0];var o=cc.winSize.width-a.width,r=cc.winSize.height-a.height;return t.offset=cc.p(o/2,r/2),t.rect=cc.rect(o/2,r/2,a.width,a.height),t},darwDebugInfo:function(){var t=this.getCurrentMapInfo(),e=this.currentMap.getTileSize(),i=t.offset,s=new cc.Node("MapDebugNode"),n=s.addComponent(cc.Graphics);s.parent=cc.director.getScene();for(var a=0;a<=t.mapNumSize.width;a++)n.moveTo(a*e.width+i.x,i.y),n.lineTo(a*e.width+i.x,i.y+t.mapSize.height);for(var o=0;o<=t.mapNumSize.height;o++)n.moveTo(0+i.x,o*e.height+i.y),n.lineTo(t.mapSize.width+i.x,o*e.height+i.y);n.stroke()},getMapRolePos:function(){var t={},e=this.currentMap.getObjectGroup("role");if(e)for(var i=e.getObjects(),s=0;s<i.length;s++){var n=i[s].getProperties(),a=this.exchangePos(cc.p(n.x,n.y));n.name&&(t[n.name]=a)}return t}}),cc._RF.pop()},{NavEdge:"NavEdge",NavNode:"NavNode",Platform:"Platform"}],NavEdge:[function(t,e,i){"use strict";cc._RF.push(e,"685beQ1VDZJLo8v2snchX06","NavEdge"),cc.Class({ctor:function(){this.headNode=null,this.lastNode=null},init:function(t){t=t||{},this.headNode=t.headNode,this.lastNode=t.lastNode},drawSelf:function(t){t.fillColor=cc.hexToColor("#000000"),t.strokeColor=cc.hexToColor("#000000"),t.moveTo(this.headNode.pos.x,this.headNode.pos.y),t.lineTo(this.lastNode.pos.x,this.lastNode.pos.y),t.stroke(),t.fill()}}),cc._RF.pop()},{}],NavNode:[function(t,e,i){"use strict";cc._RF.push(e,"43680o0gWVLArz5mzc/0YX5","NavNode"),cc.Class({ctor:function(){this.edgeList={}},init:function(t){t=t||{},this.pos=t.pos,this.size=t.size},drawSelf:function(t,e){e?(t.fillColor=e,t.strokeColor=e):(t.fillColor=cc.hexToColor("#000000"),t.strokeColor=cc.hexToColor("#000000")),t.rect(this.pos.x-3,this.pos.y-3,6,6),t.stroke(),t.fill()},setEdge:function(t,e){this.edgeList[t]=e},isHaveMidBottpm:function(){return!!!this.edgeList.mid_bottom},foreachEdge:function(t){for(var e in this.edgeList){var i=this.edgeList[e];i&&t(e,i)}}}),cc._RF.pop()},{}],Platform:[function(t,e,i){"use strict";cc._RF.push(e,"c319de4T0BPHrK15SV7H8B3","Platform"),cc.Class({ctor:function(){this.nodeList=[]},init:function(t){t=t||{},this.pos=t.pos,this.size=t.size},contains:function(t){return this.nodeList.contains(t)},canAdd:function(t){for(var e=0;e<this.nodeList.length;e++){var i=this.nodeList[e];for(var s in i.edgeList)if(i.edgeList.hasOwnProperty(s)&&i.edgeList[s].lastNode==t)return!0}},addNode:function(t){this.nodeList.push(t)},drawSelf:function(t,e){e?(t.fillColor=e,t.strokeColor=e):(t.fillColor=cc.hexToColor("#000000"),t.strokeColor=cc.hexToColor("#000000")),this.nodeList.forEach(function(e){t.rect(e.pos.x-3,e.pos.y-3,6,6)},this),t.stroke(),t.fill()},getRandomNode:function(){var t=Math.floor(Math.random()*this.nodeList.length);return this.nodeList[t]}}),cc._RF.pop()},{}],PopupAnimation:[function(t,e,i){"use strict";cc._RF.push(e,"5930eOm7TpPK4Ing3Dqy7lm","PopupAnimation"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],RoleAnimCpt:[function(t,e,i){"use strict";cc._RF.push(e,"0c017ODUlBKKKzRKGT2STQE","RoleAnimCpt"),cc.Class({extends:cc.Component,properties:{aniNode:cc.Node},onLoad:function(){this.defScaleX=this.aniNode.scaleX,this.rigidBody=this.getComponent(cc.RigidBody),this.anim=this.aniNode.getComponent(cc.Animation),this.anim.play("role_1001_idel")},update:function(t){var e=this.rigidBody.getLinearVelocityFromWorldPoint(this.rigidBody.getWorldCenter());e.x>.1?this.aniNode.scaleX=this.defScaleX:e.x<-.1&&(this.aniNode.scaleX=-this.defScaleX),Math.abs(e.x)>3?"role_1001_walk"!=this.anim.currentClip.name&&this.anim.play("role_1001_walk"):"role_1001_idel"!=this.anim.currentClip.name&&this.anim.play("role_1001_idel")}}),cc._RF.pop()},{}],RoleAttribute:[function(t,e,i){"use strict";cc._RF.push(e,"75a33lzNahHuY6h+5T1omT9","RoleAttribute"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],RoleCpt:[function(t,e,i){"use strict";cc._RF.push(e,"fe5e6Pg1OFAnYoVOoA3Hd00","RoleCpt"),cc.Class({extends:cc.Component,properties:{navPosNode:cc.Node},onLoad:function(){var t=new cc.Node("MapDebugNode");this.g=t.addComponent(cc.Graphics),t.parent=cc.director.getScene(),this.targetNavNode=null,this.schedule(function(){this.getCurrentNavNode()==this.targetNavNode&&this.platform?(this.targetNavNode=this.platform.getRandomNode(),this.getComponent("Steering").setTargetPos(this.targetNavNode.pos)):this.updateCurrentPlatform()},2)},updateCurrentPlatform:function(){var t=this.getCurrentNavNode();return this.targetNavNode=t,this.platform=GM.mapManager.getPlatformByNode(t),this.platform},getCurrentNavNode:function(){var t=this.node.convertToWorldSpaceAR(this.navPosNode.getPosition());return GM.mapManager.getNavNodeByPos(t)}}),cc._RF.pop()},{}],Steering:[function(t,e,i){"use strict";cc._RF.push(e,"2f9acz5dIpDKZ4szWtl39hx","Steering"),cc.Class({extends:cc.Component,properties:{maxSpeed:1e3},onLoad:function(){this.rigidBody=this.getComponent(cc.RigidBody);var t=new cc.Node("MouseNode");t.parent=cc.director.getScene(),t.width=cc.winSize.width,t.height=cc.winSize.height,t.x=cc.winSize.width/2,t.y=cc.winSize.height/2},updateTargetPos:function(t){var e=t.getLocation();this.targetPos=cc.v2(e.x,e.y)},setTargetPos:function(t){this.targetPos=t},start:function(){},update:function(t){this.targetPos&&this.rigidBody.applyLinearImpulse(this.arrive(this.targetPos),this.rigidBody.getLocalCenter())},seek:function(t){return t.sub(this.rigidBody.getWorldPosition()).normalize().mul(this.maxSpeed).sub(this.rigidBody.linearVelocity)},flee:function(t){return this.rigidBody.getWorldPosition().sub(t).magSqr()>1e4?cc.v2(0,0):this.rigidBody.getWorldPosition().sub(t).normalize().mul(this.maxSpeed).sub(this.rigidBody.linearVelocity)},arrive:function(t){var e=t.sub(this.rigidBody.getWorldPosition()),i=e.mag();if(i>0){var s=i/.2*1;return s=Math.min(s,this.maxSpeed),e.mul(s/i).sub(this.rigidBody.linearVelocity)}return cc.v2(0,0)}}),cc._RF.pop()},{}]},{},["MainMenu","CameraManager","EnemyManager","GameManager","MapManager","BaseScript","PopupAnimation","NavEdge","NavNode","Platform","RoleAnimCpt","RoleAttribute","RoleCpt","Steering","HotUpdate"]);